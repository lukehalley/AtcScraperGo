query GetTopNDexsForNetwork($network: EthereumNetwork!, $limit: Int!, $offset: Int!, $from: ISO8601DateTime) {
  ethereum(network: $network) {
    dexTrades(
      options: {desc: "trades", limit: $limit, offset: $offset}
      date: {since: $from}
      protocol: {is: "Uniswap v2"}
    ) {
      protocol
      trades: count
      currencies: count(uniq: buy_currency)
      contracts: count(uniq: smart_contracts)
      exchange {
        fullName
        address {
          address
        }
      }
    }
  }
}

query GetPairCreatedByFactory($network: EthereumNetwork!, $limit: Int!, $factoryAddress: String!) {
  ethereum(network: $network) {
    arguments(
      smartContractAddress: {is: $factoryAddress}
      smartContractEvent: {is: "PairCreated"}
      options: {desc: "block.height", limit: $limit}
    ) {
      reference {
        address
      }
      block {
        height
      }
    }
  }
}

query GetRouterAddressFromPairBaseCurrency ($network: EthereumNetwork!, $factoryAddress: String!, $baseCurrency: String!, $limit: Int!) {
  ethereum(network: $network) {
    dexTrades(
      options: {limit: $limit, desc: "block.height"}
      baseCurrency: {is: $baseCurrency}
      exchangeAddress: {is: $factoryAddress}
    ) {
      block {
        height
      }
      transaction {
        to {
          address
        }
      }
    }
  }
}

query GetBitQueryAccountDetails ($apiKey: String!) {
  utilities {
    activePeriod (apiKey: $apiKey){
      pointsRemaining
      points
      isPaid
      isPointsConsumed
      isSpent
      isBlocked
      starts {
        date
      }
      ends {
        date
      }
      billingDay
    }
  }
}

query GetAllStablecoinPairsCreatedForDex($network: EthereumNetwork!, $from: ISO8601DateTime, $limit: Int!, $factoryAddress: String!, $stablecoinAddress: String!, $tradeAmountUsd: Float!) {
  ethereum(network: $network) {
    dexTrades(
      options: {asc: "timeInterval.second", limit: $limit}
      time: {after: $from }
      exchangeAddress: {is: $factoryAddress}
      quoteCurrency: {is: $stablecoinAddress}
      tradeAmountUsd: {gt: $tradeAmountUsd}

    ) {
      timeInterval {
        second(count: 60)
      }
      baseCurrency {
        symbol
        address
      }
      baseAmount
      quoteCurrency {
        symbol
        address
      }
      quoteAmount
      trades: count
      quotePrice
      high: quotePrice(calculate: maximum)
      low: quotePrice(calculate: minimum)
      open: minimum(of: block, get: quote_price)
      close: maximum(of: block, get: quote_price)
      volume: quoteAmount
      count: count
    }
  }
}
